webpackJsonp([1],{"90tv":function(t,e){},DCEb:function(t,e){},DtoB:function(t,e){},FFeo:function(t,e){},LDYK:function(t,e){},MD7m:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},r,!1,function(t){n("X4ia")},null,null).exports,o=n("/ocq"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"title"}},[e("span",{staticClass:"lunch"},[this._v("昼飯")]),this._v(" "),e("span",{staticClass:"meeting"},[this._v("会議")])])}]};var u=n("VU/8")({name:"Title"},i,!1,function(t){n("sNf0")},"data-v-7cca70a2",null).exports,c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"ModalPanel"}},[n("div",{staticClass:"shadow",on:{click:t.closeModal}}),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"closeButton",on:{click:t.closeModal}},[t._v("x")]),t._v(" "),n("h2",[t._v("グループの新規作成")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.groupName,expression:"groupName"}],staticClass:"nameField",attrs:{id:"groupName",placeholder:"TKメディアユニット"},domProps:{value:t.groupName},on:{input:function(e){e.target.composing||(t.groupName=e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"submit"},on:{click:t.addGroup}},[t._v("作成")])])])},staticRenderFns:[]};var m={name:"AddModalButton",components:{"group-modal":n("VU/8")({name:"AddGroupModal",data:function(){return{groupName:""}},methods:{closeModal:function(){this.$emit("closeButtonClicked")},addGroup:function(){this.groupName.trim().length<=0||(this.$store.dispatch("addGroup",this.groupName.trim()),this.$emit("closeButtonClicked"))}}},c,!1,function(t){n("lmJJ")},"data-v-3d1f8858",null).exports},data:function(){return{modalOpen:!1}},methods:{openModal:function(){this.modalOpen=!0},closeModal:function(){this.modalOpen=!1}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"addGroup",on:{click:this.openModal}},[this._v("グループを新規作成")]),this._v(" "),this.modalOpen?e("group-modal",{on:{closeButtonClicked:this.closeModal}}):this._e()],1)},staticRenderFns:[]};var d=n("VU/8")(m,l,!1,function(t){n("DtoB")},"data-v-2288f626",null).exports,p=n("Dd8w"),h=n.n(p),v=n("NYxO"),f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"group"},[e("span",{staticClass:"name"},[this._v(this._s(this.group.name))]),this._v(" "),e("span",{staticClass:"memberCount"},[this._v(this._s(this.group.memberCount)+"人")])])},staticRenderFns:[]};var _=n("VU/8")({name:"Group",props:["group"]},f,!1,function(t){n("DCEb")},"data-v-ad0d6dca",null).exports,g={name:"LoadingModal",computed:Object(v.c)({nowLoading:function(t){return t.nowLoading}})},b={render:function(){var t=this.$createElement,e=this._self._c||t;return this.nowLoading?e("div",{attrs:{id:"ModalPanel"}},[e("div",{staticClass:"shadow"}),this._v(" "),this._m(0)]):this._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"panel"},[e("h2",{staticClass:"loading"},[this._v("Now Loading")])])}]};var N={name:"Groups",components:{group:_,loading:n("VU/8")(g,b,!1,function(t){n("SWZO")},"data-v-4193fb16",null).exports},computed:h()({},Object(v.b)({groups:"allGroups"})),created:function(){this.$store.dispatch("getAllGroups")}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"groupList"},[e("loading"),this._v(" "),this._l(this.groups,function(t){return e("router-link",{key:t.id,attrs:{to:{name:"GroupDetail",params:{id:t.id}}}},[e("group",{attrs:{group:t}})],1)})],2)},staticRenderFns:[]};var L={name:"Top",components:{"my-title":u,"modal-button":d,groups:n("VU/8")(N,C,!1,function(t){n("l8HO")},"data-v-3a5bbf4a",null).exports}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main_container"},[e("my-title"),this._v(" "),e("h2",[this._v("参加したいグループを選択してください")]),this._v(" "),e("groups"),this._v(" "),e("modal-button")],1)},staticRenderFns:[]};var F=n("VU/8")(L,M,!1,function(t){n("S1o7")},"data-v-516232fb",null).exports,$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",{staticClass:"memberName"},[this._v(this._s(this.member.name))]),this._v(" "),e("span",{staticClass:"removeButton",on:{click:this.removeMember}},[this._v("x")])])},staticRenderFns:[]};var R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"memberForm"}},[n("div",{attrs:{id:"ModalPanel"}},[n("div",{staticClass:"shadow",on:{click:t.closeModal}}),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"closeButton",on:{click:t.closeModal}},[t._v("x")]),t._v(" "),n("h2",[t._v("グループに参加")]),t._v(" "),n("p",[t._v("表示する名前を入力してください")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.memberName,expression:"memberName"}],staticClass:"nameField",attrs:{placeholder:"やまぴ"},domProps:{value:t.memberName},on:{input:function(e){e.target.composing||(t.memberName=e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"submit"},on:{click:t.addMember}},[t._v("参加")])])])])},staticRenderFns:[]};var k={name:"MemberList",components:{member:n("VU/8")({name:"Member",props:["member"],methods:{removeMember:function(){this.$store.dispatch("removeMember",this.member)}}},$,!1,function(t){n("LDYK")},"data-v-dc2dc832",null).exports,"member-form":n("VU/8")({name:"MemberForm",data:function(){return{memberName:""}},methods:{closeModal:function(){this.$emit("closeButtonClicked")},addMember:function(){if(!(this.memberName.trim().length<=0)){var t={memberName:this.memberName.trim(),groupId:this.$route.params.id};this.$store.dispatch("addMember",t),this.$emit("closeButtonClicked")}}}},R,!1,function(t){n("Te6j")},"data-v-db3bada4",null).exports},props:["members"],data:function(){return{modalOpen:!1}},methods:{openModal:function(){this.modalOpen=!0},closeModal:function(){this.modalOpen=!1}}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"memberList"}},[n("div",{staticClass:"header"},[n("h2",[t._v("参加者")]),t._v(" "),n("button",{on:{click:t.openModal}},[t._v("参加する")])]),t._v(" "),n("ul",{staticClass:"members"},t._l(t.members,function(t){return n("member",{key:t.id,attrs:{member:t}})})),t._v(" "),t.modalOpen?n("member-form",{on:{closeButtonClicked:t.closeModal}}):t._e()],1)},staticRenderFns:[]};var S=n("VU/8")(k,G,!1,function(t){n("XWNq")},"data-v-3d2fa21a",null).exports,x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",{staticClass:"shopName"},[this._v(this._s(this.restaurant.name))]),this._v(" "),e("span",{staticClass:"removeButton",on:{click:this.removeShop}},[this._v("x")])])},staticRenderFns:[]};var w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"shopForm"}},[n("div",{attrs:{id:"ModalPanel"}},[n("div",{staticClass:"shadow",on:{click:t.closeModal}}),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"closeButton",on:{click:t.closeModal}},[t._v("x")]),t._v(" "),n("h2",[t._v("候補のお店を追加")]),t._v(" "),n("p",[t._v("追加したいお店を入力してください")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shopName,expression:"shopName"}],staticClass:"nameField",attrs:{placeholder:"龍門"},domProps:{value:t.shopName},on:{input:function(e){e.target.composing||(t.shopName=e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"submit"},on:{click:t.addShop}},[t._v("追加")])])])])},staticRenderFns:[]};var E={name:"ShopList",components:{shop:n("VU/8")({name:"Shop",props:["restaurant"],methods:{removeShop:function(){this.$store.dispatch("removeShop",this.restaurant)}}},x,!1,function(t){n("lhXd")},"data-v-4963f6a4",null).exports,"shop-form":n("VU/8")({name:"ShopForm",data:function(){return{shopName:""}},methods:{closeModal:function(){this.$emit("closeButtonClicked")},addShop:function(){if(!(this.shopName.trim().length<=0)){var t={shopName:this.shopName.trim(),groupId:this.$route.params.id};this.$store.dispatch("addShop",t),this.$emit("closeButtonClicked")}}}},w,!1,function(t){n("90tv")},"data-v-317881cc",null).exports},props:["restaurants"],data:function(){return{modalOpen:!1}},methods:{openModal:function(){this.modalOpen=!0},closeModal:function(){this.modalOpen=!1}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"shopList"}},[n("div",{staticClass:"header"},[n("h2",[t._v("候補店舗一覧")]),t._v(" "),n("button",{on:{click:t.openModal}},[t._v("追加する")])]),t._v(" "),n("ul",{staticClass:"shops"},t._l(t.restaurants,function(t){return n("shop",{key:t.id,attrs:{restaurant:t}})})),t._v(" "),t.modalOpen?n("shop-form",{on:{closeButtonClicked:t.closeModal}}):t._e()],1)},staticRenderFns:[]};var V={name:"StartButton",data:function(){return{perNum:""}},methods:{startGrouping:function(){if(this.perNum<=0)return alert("0より大きい数字を入力してください");this.$router.push({name:"GroupingResult",query:{perNum:this.perNum}})}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"startButton"}},[t._v("\n  1グループあたり\n  "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.perNum,expression:"perNum"}],staticClass:"memberNumField",attrs:{type:"number",defaultValue:"4",max:"8",min:"1",required:""},domProps:{value:t.perNum},on:{input:function(e){e.target.composing||(t.perNum=e.target.value)}}}),t._v("\n  人で\n  "),n("button",{staticClass:"startButton",attrs:{type:"submit"},on:{click:t.startGrouping}},[t._v("振り分け開始")])])},staticRenderFns:[]};var y={name:"GroupDetail",components:{"my-title":u,"member-list":S,"shop-list":n("VU/8")(E,U,!1,function(t){n("WeRy")},"data-v-60ca5e1a",null).exports,"start-button":n("VU/8")(V,O,!1,function(t){n("rs+6")},"data-v-7ce7c929",null).exports},computed:h()({},Object(v.b)({group:"group",members:"members",restaurants:"restaurants"})),created:function(){this.$store.dispatch("getGroup",this.$route.params.id)}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main_container"},[n("my-title"),t._v(" "),n("h1",{staticClass:"groupName"},[t._v(t._s(t.group.name))]),t._v(" "),n("member-list",{attrs:{members:t.members}}),t._v(" "),n("shop-list",{attrs:{restaurants:t.restaurants}}),t._v(" "),n("start-button")],1)},staticRenderFns:[]};var q=n("VU/8")(y,B,!1,function(t){n("pzV+")},"data-v-72f7f622",null).exports,D={render:function(){var t=this.$createElement;return(this._self._c||t)("li",{staticClass:"member"},[this._v("\n  "+this._s(this.member.name)+"\n")])},staticRenderFns:[]};var P={name:"MemberList",components:{member:n("VU/8")({name:"Member",props:["member"]},D,!1,function(t){n("qqAX")},"data-v-023a5cae",null).exports},props:["members"]},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"memberList"}},[e("ul",this._l(this.members,function(t){return e("member",{key:t.id,attrs:{member:t}})}))])},staticRenderFns:[]};var W={name:"Shop",components:{"member-list":n("VU/8")(P,A,!1,function(t){n("R6p1")},"data-v-9d870c2a",null).exports},props:["shop"]},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"shop"},[e("h2",{staticClass:"name"},[this._v(this._s(this.shop.restaurant.name))]),this._v(" "),e("member-list",{attrs:{members:this.shop.members}})],1)},staticRenderFns:[]};var X={name:"ShopList",components:{shop:n("VU/8")(W,T,!1,function(t){n("MD7m")},"data-v-c1112814",null).exports},props:["result"]},j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"shopList"}},[e("ul",this._l(this.result.restaurants,function(t){return e("shop",{key:t.id,attrs:{shop:t}})}))])},staticRenderFns:[]};var I={name:"GroupingResult",components:{"my-title":u,"shop-list":n("VU/8")(X,j,!1,function(t){n("qbWl")},"data-v-6ad8290c",null).exports},computed:h()({},Object(v.b)({result:"result"})),created:function(){var t={perNum:this.$route.query.perNum,groupId:this.$route.params.id};this.$store.dispatch("startGrouping",t)}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main_container"},[e("my-title"),this._v(" "),e("h2",[this._v("今回のランダムランチの組合せです")]),this._v(" "),e("shop-list",{attrs:{result:this.result}}),this._v(" "),e("router-link",{attrs:{to:{name:"Top"}}},[this._v("Topに戻る")])],1)},staticRenderFns:[]};var H=n("VU/8")(I,J,!1,function(t){n("FFeo")},"data-v-41c36d2c",null).exports;s.a.use(o.a);var K=new o.a({routes:[{path:"/",name:"Top",component:F},{path:"/groups/:id",name:"GroupDetail",component:q},{path:"/groups/:id/result",name:"GroupingResult",component:H}]}),Y=n("mtWM"),z=n.n(Y),Z="https://damp-crag-50946.herokuapp.com/",Q=function(t){return z.a.get(Z+"groups/"+t).then(function(t){return t.data.group})},tt=function(){return z.a.get(Z+"groups").then(function(t){return t.data})},et=function(t){var e=new URLSearchParams;return e.append("group[name]",t),z.a.post(Z+"groups",e).then(function(t){return t.data})},nt=function(t){return z.a.get(Z+"groups/"+t.groupId+"/result?members_num_per_group="+t.perNum).then(function(t){return t.data})},st={state:{group:{id:"",name:"",members:[],restaurants:[]},groupingResult:[],all:[],nowLoading:!1},getters:{group:function(t){return t.group},members:function(t){return t.group.members},restaurants:function(t){return t.group.restaurants},allGroups:function(t){return t.all},result:function(t){return t.groupingResult}},actions:{getGroup:function(t,e){var n=t.commit;n("setStartLoading"),Q(e).then(function(t){n("setGroup",t),n("setFinishLoading")}).catch(function(t){return console.log(t)})},getAllGroups:function(t){var e=t.commit;e("setStartLoading"),tt().then(function(t){e("setGroups",t),e("setFinishLoading")}).catch(function(t){return console.log(t)})},addGroup:function(t,e){var n=this,s=t.commit;s("setStartLoading"),et(e).then(function(){s("setFinishLoading"),n.dispatch("getAllGroups")}).catch(function(t){return console.log(t)})},startGrouping:function(t,e){var n=t.commit;n("setStartLoading"),nt(e).then(function(t){n("setFinishLoading"),n("setResult",t)})}},mutations:{setGroup:function(t,e){t.group=e},setGroups:function(t,e){t.all=e},setStartLoading:function(t){t.nowLoading=!0},setFinishLoading:function(t){t.nowLoading=!1},setResult:function(t,e){t.groupingResult=e}}},rt=function(t){var e=new URLSearchParams;return e.append("member[name]",t.memberName),e.append("member[group_id]",t.groupId),z.a.post(Z+"members",e).then(function(t){return t.data})},at=function(t){return z.a.delete(Z+"members/"+t)},ot={state:{nowLoading:!1},actions:{addMember:function(t,e){var n=this,s=t.commit;s("setStartLoading"),rt(e).then(function(t){s("setFinishLoading"),n.dispatch("getGroup",t.group_id)}).catch(function(t){return console.log(t)})},removeMember:function(t,e){var n=this,s=t.commit;s("setStartLoading"),at(e.id).then(function(){s("setFinishLoading"),n.dispatch("getGroup",e.group_id)}).catch(function(t){return console.log(t)})}},mutations:{setStartLoading:function(t){t.nowLoading=!0},setFinishLoading:function(t){t.nowLoading=!1}}},it=function(t){var e=new URLSearchParams;return e.append("restaurant[name]",t.shopName),e.append("restaurant[group_id]",t.groupId),z.a.post(Z+"restaurants",e).then(function(t){return t.data})},ut=function(t){return z.a.delete(Z+"restaurants/"+t)},ct={state:{nowLoading:!1},actions:{addShop:function(t,e){var n=this,s=t.commit;s("setStartLoading"),it(e).then(function(t){s("setFinishLoading"),n.dispatch("getGroup",t.group_id)}).catch(function(t){return console.log(t)})},removeShop:function(t,e){var n=this,s=t.commit;s("setStartLoading"),ut(e.id).then(function(){s("setFinishLoading"),n.dispatch("getGroup",e.group_id)}).catch(function(t){return console.log(t)})}},mutations:{setStartLoading:function(t){t.nowLoading=!0},setFinishLoading:function(t){t.nowLoading=!1}}};s.a.use(v.a);var mt=new v.a.Store({modules:{groups:st,members:ot,shops:ct}});s.a.config.productionTip=!1,new s.a({el:"#app",store:mt,router:K,components:{App:a},template:"<App/>"})},R6p1:function(t,e){},S1o7:function(t,e){},SWZO:function(t,e){},Te6j:function(t,e){},WeRy:function(t,e){},X4ia:function(t,e){},XWNq:function(t,e){},l8HO:function(t,e){},lhXd:function(t,e){},lmJJ:function(t,e){},"pzV+":function(t,e){},qbWl:function(t,e){},qqAX:function(t,e){},"rs+6":function(t,e){},sNf0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.89193fdbaaad893cff69.js.map